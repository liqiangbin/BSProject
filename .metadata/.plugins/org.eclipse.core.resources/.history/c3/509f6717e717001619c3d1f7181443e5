package com.cn.hnust.controller;  
  
import java.util.List;

import javax.annotation.Resource;
import javax.servlet.http.HttpServletRequest;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

import com.cn.hnust.pojo.Customer;
import com.cn.hnust.pojo.Subtype;
import com.cn.hnust.pojo.Type;
import com.cn.hnust.service.CustomerService;
import com.cn.hnust.service.SubTypeService;
import com.cn.hnust.service.TypeService;
  
@Controller  

@RequestMapping("/customer")  
public class CustomerController {  

	private static String keji="10";
	private static String jiaoyu="20";
	private static String shenghuo="30";
    @Resource  
    private CustomerService customerService;  
    @Resource  
    private TypeService typeService;  
    @Resource  
    private SubTypeService subTypeService; 
      
    @RequestMapping("/regeist")  
    public String toIndex(HttpServletRequest request,Customer customer,Model model){  
       System.out.println("zhuce");
    	int s=customerService.insert(customer);
    	if(s==1){
    		model.addAttribute("regeistMessage", "注册成功！请登录");
    	}else{
    		model.addAttribute("regeistMessage", "注册失败！请重试");
    	}
    	return "customer/login";  
    }  
    @RequestMapping("/update")  
    public String update(HttpServletRequest request,Customer customer,Model model){  
       
    	int s=customerService.updateById(customer);
    	if(s==1){
    		model.addAttribute("updateMessage", "修改成功");
    	}else{  
    		model.addAttribute("updateMessage", "修改失败");
    	}
    	return "update";  
    }  
    @RequestMapping("/index")  
    public String index(HttpServletRequest request,Customer customer,Model model,Type type,Subtype sub1){  
    	//查询图书分类信息
    	List<Type> typeList = typeService.getByParams(type);
 		model.addAttribute("typeList", typeList);
 		List<Subtype> subList = subTypeService.getAllSelect(sub1);
 		model.addAttribute("subList", subList);
       //查询最新优惠信息
    	
       //查询图书销量排行
    	
      //查询新书上架
    	
    	//查询智能推荐
    
    	return "index";  
    }
}  